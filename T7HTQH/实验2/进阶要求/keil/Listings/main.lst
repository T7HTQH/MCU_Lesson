C51 COMPILER V9.60.7.0   MAIN                                                              04/17/2023 14:27:56 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE MAIN
OBJECT MODULE PLACED IN .\Objects\main.obj
COMPILER INVOKED BY: d:\Keil_v5\C51\BIN\C51.EXE main.c OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Listings\main
                    -.lst) TABS(2) OBJECT(.\Objects\main.obj)

line level    source

   1          #include <reg51.h>
   2          #include <math.h>
   3          #include <stdio.h>
   4          #include <string.h>
   5          
   6          
   7          unsigned char seg[]={0x3F, 0x06, 0x5B,0x4F,0x66,0x6D,0x7D,0x07,0x7F,0x6F,0x77,0x7C,0x39,0x5E,0x79,0x71};
   8          
   9          sbit seg1=P3^0;
  10          sbit seg2=P3^1;
  11          sbit seg3=P3^2;
  12          sbit seg4=P3^3;
  13          sbit seg5=P3^4;
  14          sbit seg6=P3^5;
  15          
  16          void delay_ms(unsigned char t)
  17          {
  18   1        unsigned char i;
  19   1        while(t--)
  20   1        {
  21   2          for(i=0;i<110;i++);
  22   2        }
  23   1      }
  24          
  25          void seg_show(unsigned char where,unsigned int num,unsigned char point)
  26          {
  27   1        switch(where)
  28   1        {
  29   2          case 1:P3=0xff&(~(0x01));P2=seg[num];break;
  30   2          case 2:P3=0xff&(~(0x01<<1));P2=seg[num];break;
  31   2          case 3:P3=0xff&(~(0x01<<2));P2=seg[num];break;
  32   2          case 4:P3=0xff&(~(0x01<<3));P2=seg[num];break;
  33   2          case 5:P3=0xff&(~(0x01<<4));P2=seg[num];break;
  34   2          case 6:P3=0xff&(~(0x01<<5));P2=seg[num];break;
  35   2        }
  36   1        if(point==1)
  37   1        {
  38   2          P2=P2|0x80;
  39   2        }
  40   1        if(where<6)
  41   1        {
  42   2          delay_ms(8);
  43   2        }
  44   1        
  45   1      }
  46          
  47          void seg_showln(float number)
  48          {
  49   1        unsigned char change[7];
  50   1        unsigned char con=0,i=0,point_flag=0;
  51   1        sprintf(change,"%f",number);
  52   1        point_flag=0;
  53   1        for(i=0;i<8;)
  54   1        {
C51 COMPILER V9.60.7.0   MAIN                                                              04/17/2023 14:27:56 PAGE 2   

  55   2          
  56   2          if(change[i]=='.')
  57   2          {
  58   3            point_flag=1;
  59   3            con=i;
  60   3            seg_show(i,change[i-1]-48,point_flag);
  61   3          }
  62   2          else if(!(point_flag==1&&change[i]=='0'))
  63   2          {
  64   3            seg_show(i+1-point_flag,change[i]-48,0);
  65   3          }
  66   2          i++;
  67   2          
  68   2        }
  69   1      }
  70          
  71          void main()
  72          {
  73   1        while(1)
  74   1        {
  75   2          seg_showln(1.56);
  76   2        }
  77   1        
  78   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    205    ----
   CONSTANT SIZE    =      3    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16       8
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
